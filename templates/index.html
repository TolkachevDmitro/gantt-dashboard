<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ö–∞–ª–µ–Ω–¥–∞—Ä‚Äë–ì–∞–Ω—Ç</title>
    <!-- TailwindCSS CDN: —à–≤–∏–¥–∫–æ –±–µ–∑ –±—ñ–ª–¥—É -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- interact.js –¥–ª—è drag¬†&¬†resize -->
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <link rel="stylesheet" href="/static/style.css" />
    <link rel="stylesheet" href="/static/goods_item.css" />
    <link rel="stylesheet" href="/static/changes-log.css" />
  </head>
  <body class="bg-white text-gray-800 h-screen flex flex-col">
    <!-- ‚ÑπÔ∏è basic header -->
    <header
      class="p-4 border-b flex items-center justify-between flex-shrink-0 fixed-header"
    >
      <h1 class="text-xl font-semibold">–ö–∞–ª–µ–Ω–¥–∞—Ä‚Äë–¥–∞—à–±–æ—Ä–¥ (Gantt)</h1>
      <div class="flex items-center space-x-4">
        <span id="todayLabel" class="text-sm text-blue-700"></span>

        <!-- User info and navigation -->
        <div class="flex items-center space-x-3 text-sm">
          <span class="text-gray-600">
            –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: <strong>{{ user.username }}</strong>
            <span
              class="ml-1 px-2 py-1 text-xs rounded {% if user.role == 'super_admin' %}bg-purple-100 text-purple-800 {% elif user.role == 'user' %}bg-blue-100 text-blue-800 {% else %}bg-gray-100 text-gray-800{% endif %}"
            >
              {% if user.role == 'super_admin' %}–°—É–ø–µ—Ä –ê–¥–º—ñ–Ω {% elif user.role
              == 'user' %}–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á {% else %}–°–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á{% endif %}
            </span>
          </span>

          <a
            href="{{ url_for('profile') }}"
            class="bg-gray-600 text-white px-3 py-1 rounded text-xs hover:bg-gray-700"
            title="–ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞"
          >
            –ü—Ä–æ—Ñ—ñ–ª—å
          </a>

          {% if user.is_super_admin() %}
          <a
            href="{{ url_for('admin_panel') }}"
            class="bg-purple-600 text-white px-3 py-1 rounded text-xs hover:bg-purple-700"
          >
            –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å
          </a>
          {% endif %}

          <a
            href="{{ url_for('logout') }}"
            class="bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700"
          >
            –í–∏–π—Ç–∏
          </a>
        </div>
      </div>
    </header>

    <!-- üìÖ –∫–∞–ª–µ–Ω–¥–∞—Ä‚Äë–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <main
      id="calendar"
      class="flex-1 overflow-auto main-content-with-fixed-header"
    ></main>

    <!-- üîÑ  load front‚Äëend logic after DOM ready -->
    <script>
      // –ü–µ—Ä–µ–¥–∞—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ JavaScript
      window.userRole = "{{ user.role }}";
      window.isViewer = {{ 'true' if user.role == 'viewer' else 'false' }};
      window.canEdit = {{ 'true' if user.is_user() else 'false' }};
      window.currentUsername = "{{ user.username }}"; // –î–æ–¥–∞—î–º–æ —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    </script>
    <script src="/static/script.js"></script>
    <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ -->
    <script src="/static/input-number-style.js"></script>
    <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∑–∞–∫–∞–∑–∞—Ö -->
    <script src="/static/script-fixed-order-logging.js"></script>
    <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–æ–≥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
    <script src="/static/changes-log.js"></script>
    <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–º–µ–∂–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á—ñ–≤ -->
    <script src="/static/user-permissions.js"></script>
    <!-- –¢–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∫–æ–ª—å–æ—Ä–æ–≤–∏—Ö —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤ -->
    <script src="/static/test-color-indicators-real.js"></script>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ª–æ–≥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
    <div id="changes-log-toggle" class="changes-log-toggle">–õ–æ–≥ –∑–º—ñ–Ω</div>
    <div id="changes-log-container" class="changes-log-container">
      <div class="changes-log-title">–Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω:</div>
      <div id="changes-log-content"></div>
    </div>
  </body>
</html>
